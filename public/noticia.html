<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="siteTitle">Notícia - Mirador e Região Online</title>
    <link rel="stylesheet" href="css/styles.css">
    
    <style>
        /* Logo styles for public site */
        .site-logo {
            max-height: 40px;
            max-width: 200px;
            object-fit: contain;
        }
        
        .logo-text {
            font-family: Georgia, 'Times New Roman', serif;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
            text-decoration: none;
            letter-spacing: -0.02em;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo" id="siteLogoLink">
                    <img id="siteLogoImg" class="site-logo" src="" alt="" style="display: none;">
                    <span id="siteLogoText" class="logo-text">Mirador e Região Online</span>
                </a>
                <a href="index.html" class="view-all">← Voltar</a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <article class="container" id="newsArticle" style="max-width: 800px;">
            <!-- Conteúdo será carregado aqui -->
        </article>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p id="footerCopyright">&copy; 2026 Mirador e Região Online. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Brand Configuration Script -->
    <script>
        // Load and apply brand settings
        (function() {
            function applyBrandSettings(settings) {
                var siteName = settings.siteName || 'Mirador e Região Online';
                
                // Update title
                var siteTitleEl = document.getElementById('siteTitle');
                if (siteTitleEl) siteTitleEl.textContent = 'Notícia - ' + siteName;
                
                // Update logo in header
                var logoImg = document.getElementById('siteLogoImg');
                var logoText = document.getElementById('siteLogoText');
                
                if (settings.logo && logoImg) {
                    logoImg.src = settings.logo;
                    logoImg.alt = siteName;
                    logoImg.style.display = 'block';
                    if (logoText) logoText.style.display = 'none';
                } else if (logoText) {
                    if (logoImg) logoImg.style.display = 'none';
                    logoText.style.display = 'block';
                    logoText.textContent = siteName;
                }
                
                // Update footer
                var footerCopyright = document.getElementById('footerCopyright');
                if (footerCopyright) footerCopyright.innerHTML = '&copy; ' + new Date().getFullYear() + ' ' + siteName + '. Todos os direitos reservados.';
            }
            
            // Try to get from localStorage
            var brandSettings = localStorage.getItem('publicSiteBrand');
            if (brandSettings) {
                try {
                    var settings = JSON.parse(brandSettings);
                    applyBrandSettings(settings);
                } catch(e) {
                    console.log('Error parsing brand settings');
                }
            }
        })();
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const newsId = parseInt(localStorage.getItem('currentNewsId'));
            const newsData = localStorage.getItem('news');
            const news = newsData ? JSON.parse(newsData) : [];
            const article = news.find(n => n.id === newsId);

            const container = document.getElementById('newsArticle');

            if (!article) {
                container.innerHTML = '<div class="empty-state"><h2>Notícia não encontrada</h2><a href="index.html">Voltar para home</a></div>';
                return;
            }

            // Update page title with article title
            var siteName = 'Mirador e Região Online';
            var brandSettings = localStorage.getItem('publicSiteBrand');
            if (brandSettings) {
                try {
                    var settings = JSON.parse(brandSettings);
                    if (settings.siteName) siteName = settings.siteName;
                } catch(e) {}
            }
            document.title = article.title + ' - ' + siteName;

            container.innerHTML = `
                <div style="margin-bottom: 2rem;">
                    <span class="news-card-category">${article.categoryName}</span>
                    <h1 style="font-size: 2.5rem; font-weight: bold; margin: 1rem 0; line-height: 1.2;">${article.title}</h1>
                    <div class="news-card-meta" style="margin-bottom: 2rem;">
                        <span>${new Date(article.date).toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' })}</span>
                        <span>Por ${article.author}</span>
                    </div>
                </div>
                
                <img src="${article.image}" alt="${article.title}" style="width: 100%; border-radius: 12px; margin-bottom: 2rem;">
                
                <div style="font-size: 1.125rem; line-height: 1.8; color: var(--foreground);">
                    <p style="margin-bottom: 1.5rem;">${article.excerpt}</p>
                    <p style="margin-bottom: 1.5rem;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</p>
                    <p style="margin-bottom: 1.5rem;">Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                </div>
                
                <div style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--border);">
                    <a href="index.html" class="view-all">← Voltar para home</a>
                </div>
            `;
        });
    </script>
</body>

</html>
